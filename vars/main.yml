---
frpc_install: "{{ role_name.endswith('frpc') }}"
frps_install: "{{ role_name.endswith('frps') }}"

# ansible_system: Linux, Win32NT, CYGWIN_NT-10.0-18363
frp_system_map:
  Linux: linux
  Win32NT: windows
frp_os: "{{ frp_system_map[ansible_system] if not ansible_system.startswith('CYGWIN') else 'windows' }}"

# ansible_architecture: x86_64, 64-bit
frp_architecture_map:
  x64_64: amd64
  64-bit: amd64
frp_arch: "{{ frp_architecture_map[ansible_architecture] | default('386') }}"

frp_config_name: "{% if frpc_config_name is defined %}{{ frpc_config_name }}{% elif frps_config_name is defined %}{{ frps_config_name }}{% endif %}"
frp_version: "{% if frpc_version is defined %}{{ frpc_version }}{% elif frps_version is defined %}{{ frps_version }}{% endif %}"

frp_release_name: frp_{{frp_version}}_{{frp_os}}_{{frp_arch}}
frp_release_ext: "{{ 'tar.gz' if frp_os == 'linux' else 'zip' }}"
frp_release_url: https://github.com/fatedier/frp/releases/download/v{{frp_version}}/{{frp_release_name}}.{{frp_release_ext}}

frp_service_name: "{{ component }}{{ '@'+frp_config_name if frp_config_name != '' else '' }}"
frpc_service_name: "frpc{{ '@'+frpc_config_name if frpc_config_name is defined else '' }}"
frps_service_name: "frps{{ '@'+frpc_config_name if frpc_config_name is defined else '' }}"
